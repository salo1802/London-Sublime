{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAAC,EAAAD,EAAA,sBAoBCE,eAAeC,EAAMC,EAAMC,EAAOC,GAC9B,IACI,MAtBTC,KAsBiBA,SAAeN,EAAAO,2BAA2BJ,EAAMC,EAAOC,GAC/DG,MAAM,uBAAuBF,EAAKF,SAClCK,OAAOC,SAASC,KAAO,mBACzB,MAAMC,GACJJ,MAAM,iCDvBf,MAAMK,EAAcC,SAASC,eAAe,YACtCC,EAAiBF,SAASC,eAAe,gBACzCE,EAAYH,SAASC,eAAe,cEJ1C,SAAaD,GAET,MAAMI,EAAUJ,EAASK,uBAAuB,mBAC1CC,EAAWN,EAASK,uBAAuB,gBAC3CE,EAAMP,EAASK,uBAAuB,eAC5CG,QAAQC,IAAIL,GACTA,GACCA,EAAQ,GAAGM,iBAAiB,SAASZ,IACjCH,OAAOC,SAASC,KAAO,kBAG5BS,GACCA,EAAS,GAAGI,iBAAiB,SAASZ,IAClCH,OAAOC,SAASC,KAAO,wBAI5BU,GACCA,EAAI,GAAGG,iBAAiB,SAASZ,IAC7BH,OAAOC,SAASC,KAAO,gBFVhCc,CAAIX,UAGPE,EAAeU,QAAQ,EAIvBb,EAAYW,iBAAiB,SAAQ,KACrCP,EAAUS,QAAS,EACnBV,EAAeU,QAAS,KAGxBV,EAAeQ,iBAAiB,UAAUvB,MAAOW,IAC7CA,EAAEe,iBAEF,MAAMC,EAAOZ,EAAea,SAASC,MAC/B1B,EAAQY,EAAeZ,MAAM0B,MAC7BzB,EAAWW,EAAeX,SAASyB,MAEnCC,EAAW,MACbH,QACAxB,WACAC,EACA2B,SAAS,GAGPC,QChCVhC,eAA0BE,GAJ1BC,MAIkCA,EAJlCC,SAIyCA,IACrC,IACI,MANRC,KAMgBA,SAAeN,EAAAkC,+BAA+B/B,EAAMC,EAAOC,GACnE,OAAOC,EACT,MAAMM,GAEO,uBAAXA,EAAEuB,MACD3B,MAAM,kDAGI,8BAAXI,EAAEuB,MACD3B,MAAM,uCDqBW4B,CAAWtC,EAAAK,KAAM4B,SCN1C9B,eAAiCoC,EAAIC,EAAQP,EAAW,IACpD,UACUQ,EAAAC,OAAOD,EAAAE,IAAIJ,EAAI,QAASC,GAASP,GACzC,MAAOnB,GACLU,QAAQC,IAAIX,IDGX8B,CAAkB5C,EAAAuC,GAAIJ,EAAQU,IAAKZ,GAEzCvB,MAAM,eAAeoB,KACrB1B,EAAMJ,EAAAK,KAAMC,EAAOC,MAIvBY,EAAUO,iBAAiB,UAAUZ,IACjCA,EAAEe,iBAEF,MAAMvB,EAAQa,EAAUb,MAAM0B,MACxBzB,EAAWY,EAAUZ,SAASyB,MAGpC5B,EAAMJ,EAAAK,KAAMC,EAAOC","sources":["src/scripts/login.js","src/functions/auth.js","src/functions/navigation.js"],"sourcesContent":["import { db, auth } from \"./app.js\";\r\nimport { login, createUser, addUserToDatabase } from \"../functions/auth.js\";\r\nimport{nav} from \"../functions/navigation\"\r\nconst registerink = document.getElementById(\"register\");\r\nconst createUserForm = document.getElementById(\"RegisterForm\");\r\nconst loginForm = document.getElementById(\"loginForm\");\r\nimport {nav} from \"../functions/navigation\"\r\n\r\n//nav\r\n\r\n   nav(document);\r\n\r\n\r\ncreateUserForm.hidden =true;\r\n\r\n\r\n\r\nregisterink.addEventListener(\"click\",()=>{\r\nloginForm.hidden = true;\r\ncreateUserForm.hidden = false;\r\n});\r\n\r\ncreateUserForm.addEventListener(\"submit\", async (e) => {\r\n    e.preventDefault();\r\n\r\n    const name = createUserForm.username.value;\r\n    const email = createUserForm.email.value;\r\n    const password = createUserForm.password.value;\r\n\r\n    const userInfo = {\r\n        name,\r\n        email,\r\n        password,\r\n        isAdmin: false,\r\n    };\r\n\r\n    const newUser = await createUser(auth, userInfo);\r\n    await addUserToDatabase(db, newUser.uid, userInfo);\r\n\r\n    alert(`Bienvenido, ${name}`);\r\n    login(auth, email, password);\r\n   \r\n});\r\n\r\nloginForm.addEventListener(\"submit\", e => {\r\n    e.preventDefault();\r\n\r\n    const email = loginForm.email.value;\r\n    const password = loginForm.password.value;\r\n\r\n    \r\n    login(auth, email, password);\r\n    \r\n});","import { createUserWithEmailAndPassword, signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport { doc, setDoc } from \"firebase/firestore\";\r\n\r\n\r\nasync function createUser(auth, { email, password }) {\r\n    try {\r\n        const { user } = await createUserWithEmailAndPassword(auth, email, password);\r\n        return user;\r\n    } catch(e) {\r\n \r\n     if(e.code === \"auth/weak-password\") {\r\n         alert(\"Tu contraseña debe tener al menos 6 caracteres\");\r\n     }\r\n \r\n     if(e.code === \"auth/email-already-in-use\") {\r\n         alert(\"Este correo ya se encuentra en uso\");\r\n     }\r\n    }\r\n }\r\n \r\n async function login(auth, email, password) {\r\n     try {\r\n         const { user } = await signInWithEmailAndPassword(auth, email, password);\r\n         alert(`Bienvenido, usuario ${user.email}`);\r\n         window.location.href = \"LS products.html\";\r\n     } catch(e) {\r\n         alert(\"Correo o contraseña inválida\");\r\n     }\r\n }\r\n\r\n async function addUserToDatabase(db, userId, userInfo = {}) {\r\n     try {\r\n         await setDoc(doc(db, \"users\", userId), userInfo)\r\n     } catch (e) {\r\n         console.log(e);\r\n     }\r\n }\r\n\r\n export {\r\n     createUser,\r\n     login,\r\n     addUserToDatabase\r\n }\r\n","\r\nfunction nav(document){\r\n\r\n    const profile = document.getElementsByClassName(\"header__profile\");\r\n    const products = document.getElementsByClassName(\"header__logo\");\r\n    const car = document.getElementsByClassName(\"header__car\");\r\n    console.log(profile)\r\n    if(profile){\r\n        profile[0].addEventListener(\"click\",(e)=>{\r\n            window.location.href = \"./login.html\"\r\n        });\r\n    }\r\n    if(products){\r\n        products[0].addEventListener(\"click\",(e)=>{\r\n            window.location.href = \"./LS products.html\"\r\n        });\r\n    }\r\n    \r\n    if(car){\r\n        car[0].addEventListener(\"click\",(e)=>{\r\n            window.location.href = \"./car.html\"\r\n        });\r\n    }\r\n}\r\n\r\nexport {nav}\r\n\r\n"],"names":["$li1Mx","parcelRequire","$1tHc5","async","$c364daf73431f47d$export$596d806903d1f59e","auth","email","password","user","signInWithEmailAndPassword","alert","window","location","href","e","$3f9d32fa80182a14$var$registerink","document","getElementById","$3f9d32fa80182a14$var$createUserForm","$3f9d32fa80182a14$var$loginForm","profile","getElementsByClassName","products","car","console","log","addEventListener","$76457545ffdb9fb8$export$80e4b313e5e6b30d","hidden","preventDefault","name","username","value","userInfo","isAdmin","newUser","createUserWithEmailAndPassword","code","$c364daf73431f47d$export$3493b8991d49f558","db","userId","$etBjH","setDoc","doc","$c364daf73431f47d$export$9f9c8eae0fddfad1","uid"],"version":3,"file":"login.74834561.js.map"}