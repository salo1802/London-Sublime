{"mappings":"oeACAA,EAAA,0BCDAC,EAAAD,EAAA,sBAiBAE,eAAeC,EAAaC,EAASC,EAAS,IAO1C,OANuBA,EAAOC,KAAKJ,MAAOK,IACtC,MAAMC,QAPdN,eAAoCE,EAASG,GACzC,MAAME,EAAaC,EAAAC,IAAIP,EAAS,mBAAmBG,EAAMK,QACzD,aAAaF,EAAAG,YAAYJ,EAAYF,GAKJO,CAAqBV,EAASG,GAE3D,OAAOG,EAAAK,eAAeL,EAAAC,IAAIP,EAASI,EAAeG,IAAIK,yBCpB9D,SAAaC,GAET,MAAMC,EAAUD,EAASE,uBAAuB,mBAC1CC,EAAWH,EAASE,uBAAuB,gBAC3CE,EAAMJ,EAASE,uBAAuB,eAC5CG,QAAQC,IAAIL,GACTA,GACCA,EAAQ,GAAGM,iBAAiB,SAASC,IACjCC,OAAOC,SAASC,KAAO,kBAG5BR,GACCA,EAAS,GAAGI,iBAAiB,SAASC,IAClCC,OAAOC,SAASC,KAAO,wBAI5BP,GACCA,EAAI,GAAGG,iBAAiB,SAASC,IAC7BC,OAAOC,SAASC,KAAO,gBFPhCC,CAAIZ,UAGP,MAAMa,EAAoBb,SAASc,eAAe,cAC5CC,EAAYf,SAASc,eAAe,YACzBd,SAASc,eAAe,YACzC,IAAIE,EAAS,IAAIhB,SAASE,uBAAuB,iBAE7Ce,GADajB,SAASE,uBAAuB,gBACjC,IACZgB,EAAa,GAGjBH,EAAUR,iBAAiB,SAAUC,IACjCA,EAAEW,iBAEFd,QAAQC,IAAI,SACZ,IAAIc,EAAOpB,SAASc,eAAe,eAC/BO,EAAWrB,SAASsB,cAAc,OAGtCD,EAASE,UAAY,kVA+BJjB,IAAAe,EAASE,aAAwCC,YAAAH,kBACjDL,KAAiDT,iBAAA,UAAAtB,MAAAuB,IAGlEA,EAAAW,iBACAd,QAAOC,IAAA,4BACHlB,EAAQ,IACRY,SAAAE,uBAAW,iBAGfuB,EAAY,IAEZzB,SAAAE,uBAAc,mBAEPwB,OAAe,IACjBC,SAAArC,IAELe,QAAYC,IAAAhB,EAAAsC,MAAA,IACZV,EAAYW,KAAAvC,EAAUsC,MAAA,OAEtBvB,QAAMC,IAAKY,GACXD,EAAiB,GAIjBQ,EAAIE,SAAaG,IAEbb,EAAUY,KAACC,EAAQC,kBAKpBzB,IAAMY,eAA2CD,SAAYtB,EAAAkB,EAAAmB,YAAAD,MAE5DE,EAAUpB,EAA8BqB,aAAAH,MACxCI,EAAYtB,EAASsB,SAAAJ,UACxBK,EAAA,GAED,GAAAlB,EAAmBQ,OAAA,eAEVxC,EAAAmD,EAAAlD,QAAA,QAGLiD,QAAQE,QAAAC,IAAAC,GACVnC,QAAAC,IAAA8B,GAKH,MAAAK,EAAA,oDC9GHxD,eAA0ByD,EAAIC,GAC1B,UACU3D,EAAA4D,OAAO5D,EAAA6D,WAAWH,EAAI,YAAaC,GACzCtC,QAAQC,IAAI,qBACd,MAAME,GACJH,QAAQC,IAAIE","sources":["src/scripts/createproduct.js","src/functions/addProduct.js","src/functions/navigation.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { doc } from \"@firebase/firestore\";\r\nimport { storage, db } from \"./app\";\r\nimport { addProduct, uploadImages } from \"../functions/addProduct\";\r\n\r\n\r\n\r\n\r\nimport {nav} from \"../functions/navigation\"\r\nimport { async } from \"@firebase/util\";\r\n\r\n//nav\r\n\r\n   nav(document);\r\n    \r\n\r\nconst createProductForm = document.getElementById(\"createForm\");\r\nconst addButton = document.getElementById(\"addColor\");\r\nconst submiter = document.getElementById(\"submiter\");\r\nlet images = [...document.getElementsByClassName(\"productImage\")];\r\nlet colors = [...document.getElementsByClassName(\"productColor\")];\r\nlet colorList = [];\r\nlet imagesList = [];\r\n\r\n//aÃ±adir color\r\naddButton.addEventListener(\"click\", (e)=>{\r\n    e.preventDefault();\r\n\r\n    console.log(\"entro\")\r\n    let div  = document.getElementById(\"formcontent\")\r\n    let newColor = document.createElement(\"div\");\r\n   \r\n    \r\n    newColor.innerHTML = `\r\n    <h2 class=\"formtitles\">Color</h2>\r\n     <input class=\"productColor\"  type=\"color\">\r\n     <h2 class=\"formtitles--image\">Image</h2>\r\n     <label class=\"custom-file-upload\">\r\n        <input required multiple=false accept=\".png,.jpg,.jpeg\" class=\"productImage\" type=\"file\">\r\n        upload the color image\r\n    </label>\r\n    `\r\n     console.log(newColor.innerHTML);\r\n\r\n    div.appendChild(newColor);\r\n   \r\n    \r\n     \r\n    \r\n    \r\n})\r\n\r\n\r\n\r\nconsole.log(images);\r\n\r\n\r\n\r\n\r\n\r\n\r\ncreateProductForm.addEventListener(\"submit\", async (e) => {\r\n    e.preventDefault();\r\n    console.log(\"Create a new product\");\r\n    let images = [...document.getElementsByClassName(\"productImage\")];\r\n    let colors = [...document.getElementsByClassName(\"productColor\")];\r\n    \r\n\r\n    imagesList.length = 0;\r\n    images.forEach(  (image)=>{\r\n        console.log(image.files[0]);\r\n        imagesList.push(image.files[0]);\r\n    })\r\n\r\n    console.log(imagesList);\r\n\r\n    colorList = []\r\n       colors.forEach(color =>{\r\n           colorList.push(color.value);\r\n       })\r\n\r\n    console.log(imagesList);\r\n    console.log(colorList)\r\n    const name = createProductForm.productName.value;\r\n    const price = createProductForm.productPrice.value;\r\n    const category = createProductForm.category.value;\r\n   \r\n\r\n   \r\n    let gallery = [];\r\n    \r\n    if (imagesList.length) {\r\n\r\n        // Vamos a subir las imagenes a firestore\r\n\r\n\r\n       const srcImages = await uploadImages(storage,[...imagesList])\r\n\r\n        gallery = await Promise.all( srcImages);\r\n        console.log(gallery);\r\n    }\r\n\r\n    const newProduct = {\r\n        name,\r\n        price,\r\n        category,\r\n       images: gallery,\r\n        colors: colorList\r\n    };\r\n\r\n    await addProduct(db, newProduct);\r\n    \r\n  \r\n});","import { addDoc, collection } from \"firebase/firestore\";\r\nimport { ref, uploadBytes, getDownloadURL} from \"firebase/storage\";\r\n\r\nasync function addProduct(db, product) {\r\n    try {\r\n        await addDoc(collection(db, \"products\"), product);\r\n        console.log(\"Product added! :)\");\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function imageUploadReference(storage, image) {\r\n    const storageRef = ref(storage, `products/images/${image.name}`);\r\n    return await uploadBytes(storageRef, image);\r\n}\r\n\r\nasync function uploadImages(storage, images = []) {\r\n    const uploadedImages = images.map( async (image) => {\r\n        const imageReference = await imageUploadReference(storage, image);\r\n\r\n        return getDownloadURL(ref(storage, imageReference.ref.fullPath));\r\n    });\r\n\r\n    return uploadedImages;\r\n\r\n}\r\n\r\nexport {\r\n    addProduct,\r\n    uploadImages\r\n}","\r\nfunction nav(document){\r\n\r\n    const profile = document.getElementsByClassName(\"header__profile\");\r\n    const products = document.getElementsByClassName(\"header__logo\");\r\n    const car = document.getElementsByClassName(\"header__car\");\r\n    console.log(profile)\r\n    if(profile){\r\n        profile[0].addEventListener(\"click\",(e)=>{\r\n            window.location.href = \"./login.html\"\r\n        });\r\n    }\r\n    if(products){\r\n        products[0].addEventListener(\"click\",(e)=>{\r\n            window.location.href = \"./LS products.html\"\r\n        });\r\n    }\r\n    \r\n    if(car){\r\n        car[0].addEventListener(\"click\",(e)=>{\r\n            window.location.href = \"./car.html\"\r\n        });\r\n    }\r\n}\r\n\r\nexport {nav}\r\n\r\n"],"names":["parcelRequire","$etBjH","async","$8d4777a6b47473b8$export$633f5b6169e2b910","storage","images","map","image","imageReference","storageRef","$aYguL","ref","name","uploadBytes","$8d4777a6b47473b8$var$imageUploadReference","getDownloadURL","fullPath","document","profile","getElementsByClassName","products","car","console","log","addEventListener","e","window","location","href","$76457545ffdb9fb8$export$80e4b313e5e6b30d","$41abd473b3f35e70$var$createProductForm","getElementById","$41abd473b3f35e70$var$addButton","$41abd473b3f35e70$var$images","$41abd473b3f35e70$var$colorList","$41abd473b3f35e70$var$imagesList","preventDefault","div","newColor","createElement","innerHTML","appendChild","colors","length","forEach","files","push","color","value","productName","price","productPrice","category","gallery","$li1Mx","Promise","all","srcImages","newProduct","db","product","addDoc","collection"],"version":3,"file":"newproduct.8ae453fb.js.map"}