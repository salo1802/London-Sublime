{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,yBCAAD,EAAAC,EAAA,oDCCA,SAAaC,GAET,MAAMC,EAAUD,EAASE,uBAAuB,mBAC1CC,EAAWH,EAASE,uBAAuB,gBAC3CE,EAAMJ,EAASE,uBAAuB,eAC5CG,QAAQC,IAAIL,GACTA,GACCA,EAAQ,GAAGM,iBAAiB,SAASC,IACjCC,OAAOC,SAASC,KAAO,kBAG5BR,GACCA,EAAS,GAAGI,iBAAiB,SAASC,IAClCC,OAAOC,SAASC,KAAO,wBAI5BP,GACCA,EAAI,GAAGG,iBAAiB,SAASC,IAC7BC,OAAOC,SAASC,KAAO,gBFVhCC,CAAIZ,UAIJ,MAAMa,EAAqBb,SAASc,eAAe,eAC7CC,EAAuBf,SAASc,eAAe,iBACrD,IAEIE,EAFAC,EAAWjB,SAASkB,cAAc,OAGlCC,EAAO,GACPC,EAAc,EASlBC,eAAeC,IACX,MAAMC,EARV,SAAkBC,GACd,MAAMC,EAAMhB,OAAOC,SAASgB,OAG5B,OAFqB,IAAIC,gBAAgBF,GACVG,IAAIJ,GAKjBK,CAAS,OAY/B,SAAuBC,GACtBA,EAAQC,OAAOC,SAAQ,CAACC,EAAOC,KAC3BC,SAAWnC,SAASkB,cAAc,UAClCiB,SAASC,UAAY,kBACrBD,SAASE,MAAMC,gBAAkBL,EACjCE,SAASI,MAAQL,EACjBjB,EAASuB,YAAYL,aAIvBpB,EAAqB0B,UAAY,gEAOEX,EAAMY,OAAA,6CAExCzB,EAA0BwB,oCAmB1B,MAGIE,EAHcxB,EAA+ByB,MAAAC,GAAAA,EAAAC,KAAAhB,EAAAgB,KAG7C,gEAAuB,uDAETL,UACV,sCAGcX,EAAaiB,gDACJC,EAAGC,eAAgBnB,EAAAoB,sSAWrDP,yBAEAQ,EAAsBnD,SAAIoD,cAAA,oBACzB7C,iBAAA,SAAAC,IASDW,EAAAkC,KAAAvB,GAEDkB,EAAAM,iBAAAnC,GACYH,GAAEuC,EAAAC,mBAAA1D,EAAA2D,GAAAzC,EAAA0C,IAAAvC,GACRgC,EAAAQ,aAAA,YAAA,GACAR,EAAAS,UAAA,yBAEAC,EAAA7D,SAAAc,eAAa,aACbgD,EAAQ9D,SAAI+D,iBAAA,oBACZ,IAAA,MAAMC,KAAAF,EAAAE,EAAAzD,iBAAA,SAAA,WACPF,QACGC,IAAAuD,EAAAI,KAKJ7C,EAAc8C,KAAA3B,MAEbsB,EAAAI,IAAAnC,EAAAY,OAAAwB,KAAA3B,6BA5FD4B,CALgB,UC/BvB9C,eAA0ByB,GACtB,MAAMsB,EAASC,EAAAC,IAAIxE,EAAA2D,GAAI,WAAYX,GACnC,IAII,aAHsBuB,EAAAE,OAAOH,IACRI,OAGvB,MAAMhE,GACJH,QAAQC,IAAIE,IDqBMiE,CAAWlD,GAI1BuB,GAAIvB","sources":["src/scripts/product.js","src/functions/getProduct.js","src/functions/navigation.js"],"sourcesContent":["import { db, auth } from \"./app\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { getProduct } from \"../functions/getProduct\";\r\nimport { getFirebaseCart, createFirebaseCart } from \"../functions/cart\";\r\nimport { getMyLocalCart, addProductToCart, currencyFormat } from \"../utils\";\r\nimport {nav} from \"../functions/navigation\"\r\n\r\n\r\n//nav\r\n\r\n   nav(document);\r\n\r\n \r\n   \r\n   const productInfoSection = document.getElementById(\"productInfo\");\r\n   const productAssetsSection = document.getElementById(\"productAssets\");\r\n   let colorDiv = document.createElement(\"div\");\r\n   \r\n   let userLogged = undefined;\r\n   let cart = [];\r\n   let actualImage = 0;\r\n   \r\n   function getParam(param) {\r\n       const url = window.location.search;\r\n       const searchParams = new URLSearchParams(url);\r\n       const productId = searchParams.get(param);\r\n       return productId;\r\n   }\r\n   \r\n   async function loadProduct() {\r\n       const productId = getParam(\"id\"); // http://localhost:1234/product.html?id=TXQ9Wf1GIoAOJLkIEMYo&age=20\r\n   \r\n       const data = await getProduct(productId);\r\n   \r\n       const product = {\r\n           ...data,\r\n           id: productId, // docSnap.id,\r\n       }\r\n   \r\n       renderProduct(product);\r\n   }\r\n   \r\n   function renderProduct(product) {\r\n    product.colors.forEach((color, index)=>{\r\n        newColor = document.createElement(\"button\");\r\n        newColor.className = \"product__colors\";\r\n        newColor.style.backgroundColor = color;\r\n        newColor.value = index;\r\n        colorDiv.appendChild(newColor);\r\n    })\r\n\r\n\r\n      productAssetsSection.innerHTML = `\r\n       <img class=\"product__mainImage\" id=\"mainImage\" src=\"${product.images[0]}\">\r\n       <div class=\"colors\">\r\n       ${colorDiv.innerHTML}\r\n       </div>\r\n       `;\r\n   \r\n       const isProductAddedToCart = cart.some((productCart) => productCart.id === product.id);\r\n   \r\n       const productButtonCart = isProductAddedToCart ?\r\n       '<button class=\"product__cart\" disabled>Added to cart</button>' :\r\n       '<button class=\"product__cart\">Add to cart</button>';\r\n   \r\n       productInfoSection.innerHTML = `\r\n       <h1 class=\"product__name\">${product.name}</h1>\r\n       <h3 class=\"product__price\">${currencyFormat(product.price)}</h3>\r\n       <div class=\"product__interaction flex\">\r\n       <label class=\"custom-file-upload\">\r\n       <input required multiple=false accept=\".png,.jpg,.jpeg\" class=\"productImage\" type=\"file\" name=\"productImage\">\r\n       upload the image you want to put in\r\n        </label>\r\n       ${productButtonCart}\r\n       </div>`;\r\n   \r\n\r\n       \r\n   \r\n       const productCartButton = document.querySelector(\".product__cart\");\r\n       productCartButton.addEventListener(\"click\", e => {\r\n           cart.push(product);\r\n   \r\n           addProductToCart(cart);\r\n   \r\n           if (userLogged) {\r\n               createFirebaseCart(db, userLogged.uid, cart);\r\n           }\r\n   \r\n           productCartButton.setAttribute(\"disabled\", true);\r\n           productCartButton.innerText = \"Added to cart\";\r\n       });\r\n\r\n       const mainImage = document.getElementById(\"mainImage\");\r\n\r\n\r\n\r\n       const btns = document.querySelectorAll('.product__colors');\r\n    for (const btn of btns) {\r\n    btn.addEventListener('click', function() {\r\n        console.log(mainImage.src);\r\n    actualImage = this.value;\r\n    mainImage.src = product.images[this.value];\r\n    console.log(mainImage.src)\r\n  });\r\n}\r\n   \r\n   \r\n\r\n   \r\n   \r\n       \r\n   \r\n   }\r\n   \r\n   onAuthStateChanged(auth, async (user) => {\r\n       if (user) {\r\n         // User is signed in, see docs for a list of available properties\r\n         // https://firebase.google.com/docs/reference/js/firebase.User\r\n         userLogged = user;\r\n         cart = await getFirebaseCart(db, userLogged.uid);\r\n         console.log(cart);\r\n         // ...\r\n       } else {\r\n           cart = getMyLocalCart();\r\n         // User is signed out\r\n         // ...\r\n       }\r\n   \r\n       loadProduct();\r\n   \r\n     });","import { db } from \"../scripts/app\";\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\n\r\nasync function getProduct(id) {\r\n    const docRef = doc(db, \"products\", id);\r\n    try {\r\n        const docSnap = await getDoc(docRef);\r\n        const data = docSnap.data();\r\n    \r\n        return data; \r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nexport {\r\n    getProduct\r\n}","\r\nfunction nav(document){\r\n\r\n    const profile = document.getElementsByClassName(\"header__profile\");\r\n    const products = document.getElementsByClassName(\"header__logo\");\r\n    const car = document.getElementsByClassName(\"header__car\");\r\n    console.log(profile)\r\n    if(profile){\r\n        profile[0].addEventListener(\"click\",(e)=>{\r\n            window.location.href = \"./login.html\"\r\n        });\r\n    }\r\n    if(products){\r\n        products[0].addEventListener(\"click\",(e)=>{\r\n            window.location.href = \"./LS products.html\"\r\n        });\r\n    }\r\n    \r\n    if(car){\r\n        car[0].addEventListener(\"click\",(e)=>{\r\n            window.location.href = \"./car.html\"\r\n        });\r\n    }\r\n}\r\n\r\nexport {nav}\r\n\r\n"],"names":["$li1Mx","parcelRequire","document","profile","getElementsByClassName","products","car","console","log","addEventListener","e","window","location","href","$76457545ffdb9fb8$export$80e4b313e5e6b30d","$63445bb05f51f6f7$var$productInfoSection","getElementById","$63445bb05f51f6f7$var$productAssetsSection","$63445bb05f51f6f7$var$userLogged","$63445bb05f51f6f7$var$colorDiv","createElement","$63445bb05f51f6f7$var$cart","$63445bb05f51f6f7$var$actualImage","async","$63445bb05f51f6f7$var$loadProduct","productId","param","url","search","URLSearchParams","get","$63445bb05f51f6f7$var$getParam","product","colors","forEach","color","index","newColor","className","style","backgroundColor","value","appendChild","innerHTML","images","productButtonCart","some","productCart","id","name","$2EF88","currencyFormat","price","productCartButton","querySelector","push","addProductToCart","$6naOk","createFirebaseCart","db","uid","setAttribute","innerText","mainImage","btns","querySelectorAll","btn","src","this","$63445bb05f51f6f7$var$renderProduct","docRef","$etBjH","doc","getDoc","data","$357632b3e2ee1ce0$export$e2005c9600188ac7"],"version":3,"file":"product.37f29537.js.map"}